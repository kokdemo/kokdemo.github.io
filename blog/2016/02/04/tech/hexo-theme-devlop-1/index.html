<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> hexo主题开发 · kok's story box</title><meta name="description" content="hexo主题开发 - kokdemo"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.ico"><link rel="stylesheet" href="/blog/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/box.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/blog/" target="_self" class="nav-list-link">博客</a></li><li class="nav-list-item"><a href="/blog/archives/" target="_self" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="/blog/tags" target="_self" class="nav-list-link">标签</a></li><li class="nav-list-item"><a href="http://kokdemo.github.io" target="_blank" class="nav-list-link">收纳箱</a></li><li class="nav-list-item"><a href="https://github.com/kokdemo" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/blog/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">hexo主题开发</h1><div class="post-meta"><span class="post-time">2016年2月4日</span></div><div class="post-content"><p>hexo作为一个比较受欢迎的静态blog生成器，其个性主题也是比较受大家欢迎的点。只要有一定的js，css，jade的开发栈就可以实现一个功能强大的主题效果。</p>
<p>当然如果要好看则是另外一回事了……</p>
<a id="more"></a>
<p>如果你并不想要折腾主题的话，我推荐以下几个有趣强大的主题，直接拖到hexo的theme文件夹就好。（什么，你不会？建议你可以换简单一些的blog，比如wordpress？）</p>
<ol>
<li><code>NexT</code> 简洁而强大 <a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="external">https://github.com/iissnan/hexo-theme-next</a></li>
<li><code>Jacman</code> 比较俏皮的风格 <a href="https://github.com/wuchong/jacman" target="_blank" rel="external">https://github.com/wuchong/jacman</a></li>
<li><code>Apollo</code> 足够简单，我目前用的就是我自己修改过的apollo主题（增强了一点功能，原版的apollo没有tag和category……） <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank" rel="external">https://github.com/pinggod/hexo-theme-apollo</a></li>
</ol>
<p>更多的主题见这里 <a href="https://hexo.io/themes/" target="_blank" rel="external">https://hexo.io/themes/</a></p>
<p>言归正传，因为hexo本身就比较简单，因此分几步来讲：</p>
<h3 id="hexo_u7684_u8DEF_u7531_u673A_u5236"><a href="#hexo_u7684_u8DEF_u7531_u673A_u5236" class="headerlink" title="hexo的路由机制"></a>hexo的路由机制</h3><p>hexo能够自动解析的页面有</p>
<ul>
<li><code>index</code> 首页</li>
<li><code>post</code> 文章</li>
<li><code>page</code> 分页</li>
<li><code>archive</code> 日期归档</li>
<li><code>category</code> 分类归档</li>
<li><code>tag</code> 标签归档</li>
</ul>
<p>这里的每一个页面都对应了主题文件夹下，layout的一个文件。因此建立主题的时候，这些文件都是可选的。当然，index是必选的。</p>
<h3 id="hexo_u7684_u53D8_u91CF"><a href="#hexo_u7684_u53D8_u91CF" class="headerlink" title="hexo的变量"></a>hexo的变量</h3><p>实际上，如果你就这么简单的创建了文件，并不会加载出文件来，hexo在渲染文件的时候，会根据页面上的一些变量来进行操作。<br>这部分的内容hexo已经给好了，比如说全局变量就有：</p>
<ul>
<li><code>site</code> 网站变量</li>
<li><code>page</code> 页面内容</li>
<li><code>config</code> 网站设置，也就是写在_config.yml中的内容</li>
<li><code>theme</code> 主题设置，也就是写在theme/_config.yml中的内容</li>
<li><code>path</code> 页面路径</li>
<li><code>url</code> 完整网址</li>
<li><code>env</code> 环境变量</li>
</ul>
<p>更多的不在这里赘述，看官方文档 <a href="https://hexo.io/zh-cn/docs/variables.html" target="_blank" rel="external">https://hexo.io/zh-cn/docs/variables.html</a></p>
<p>我就用Apollo的一段模板来解释一下吧。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//- Post Page&#10;mixin post(item)&#10;    .post&#10;        article.post-block&#10;            h1.post-title&#10;                != item.title &#10;            +postInfo(item)&#10;            .post-content&#10;                != item.content</span><br></pre></td></tr></table></figure>
<p>其中<code>mixin post(item)</code> 是jade的语法，指重用jade块，这里不详细说了，有兴趣的可以戳 <a href="https://cnodejs.org/topic/5368adc5cf738dd6090060f2" target="_blank" rel="external">https://cnodejs.org/topic/5368adc5cf738dd6090060f2</a></p>
<p>这里的参数就是一篇文章<code>post</code>，因此，我们就可以代码块中调用<code>item.title</code>文章标题，<code>item.content</code>文章内容。</p>
<p>同样的，只要我想，我也可以给里面插入<code>item.date</code>页面建立日期，<code>item.updated</code>页面更新日期，<code>item.excerpt</code>页面摘要。</p>
<p>同样的页面，如果在NexT中的写法如下：</p>
<blockquote>
<p>这里本来会有NexT的swig代码，然而不知道为什么hexo文章中只要有了这些代码立马报错……<br>我也是醉了，就这样吧，关于NexT代码的分析就无疾而终了……<br>有兴趣的看这里 <a href="https://github.com/iissnan/hexo-theme-next/blob/master/layout/archive.swig" target="_blank" rel="external">https://github.com/iissnan/hexo-theme-next/blob/master/layout/archive.swig</a></p>
</blockquote>
<p>NexT的功能就多很多了，这里读取了页面变量<code>page</code>中的所有文章<code>posts</code>，是一个数组，数组中的每一项都对应着一个文章，所以就可以看到这里读取了<code>post.date</code>作为年份，当然这里使用了一个辅助函数。</p>
<p>我在开发的过程中还找到了一些有用的变量，比如上面说到的 <code>page.posts</code> 中的每一个文章中，都有一个 <code>tags.data</code> 属性，这也是一个数组，可以读取这篇文章中所有的tag名称。<br><code>categories</code>属性则是一个对象，可以用foreach的方法进行访问。</p>
<h3 id="hexo_u7684_u8F85_u52A9_u51FD_u6570"><a href="#hexo_u7684_u8F85_u52A9_u51FD_u6570" class="headerlink" title="hexo的辅助函数"></a>hexo的辅助函数</h3><p>上一段你可能已经看到了<code>date()</code>函数，这就是hexo 提供的辅助函数，比较常用的函数有：</p>
<ul>
<li><code>url_for()</code> 生成一个全局可用的路径</li>
<li><code>js()</code> 导入一个js   </li>
<li><code>image_tag()</code> 插入图片</li>
<li><code>is_home()</code> 判断是不是首页，这类函数还有很多</li>
<li><code>date()</code> 插入格式化的日期</li>
<li><code>tagcloud()</code> 插入标签云</li>
</ul>
<p>善用这些辅助函数，可以让你少些很多冗余的代码，因此在开脑洞施工之前，先看看这个功能官方是不是已经做了。</p>
<p>那么第一篇就写这么多，更多的也可以看hexo的官网。</p>
<p>祝你折腾的愉快</p>
</div></article></div></section><footer><div class="paginator"><a href="/blog/2014/05/03/tech/技术笔记-用一个特殊方法解决同位词问题/" class="next">下一篇</a></div><div data-thread-key="2016/02/04/tech/hexo-theme-devlop-1/" data-title="hexo主题开发" data-url="http://kokdemo.github.io/blog/2016/02/04/tech/hexo-theme-devlop-1/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"kokdemo"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script><div class="copyright"><p>© 2010 - 2016 <a href="http://kokdemo.github.io/blog">kokdemo</a>, unless otherwise noted.</p></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-73260488-1",'auto');ga('send','pageview');</script><script src="https://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>