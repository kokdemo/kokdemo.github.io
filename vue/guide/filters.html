<!DOCTYPE html>
<html lang="en">
    <head>
        <title>我在学过滤器的道路上迷失了方向 - vue.js</title>
        <meta charset="utf-8">
        <meta name="description" content="Vue.js - Intuitive, Fast and Composable MVVM for building interactive interfaces.">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600|Lato|Inconsolata' rel='stylesheet' type='text/css'>
        <link rel="icon" href="/images/logo.png" type="image/x-icon">
        <script>
            window.PAGE_TYPE = "guide"
        </script>
        <link rel="stylesheet" href="/vue/css/page.css" type="text/css">

        <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46852172-1', 'vuejs.org');
  ga('send', 'pageview');
</script>
        <script src="/js/vue.min.js"></script>
    </head>
    <body>
        <div id="mobile-bar">
            <a class="menu-button"></a>
            <a class="logo" href="/"></a>
        </div>
        
        
            <div id="header">
    <a id="logo" href="/">
        <img src="/images/logo.png">
        <span>Vue.js</span>
    </a>
    <ul id="nav">
        <li><a href="/guide/" class="nav-link current">教程</a></li>
<li><a href="/api/" class="nav-link">API 参考</a></li>
<li><a href="/examples/" class="nav-link">例子</a></li>
<li><a href="/blog/" class="nav-link">Blog</a></li>
<li><a href="https://github.com/yyx990803/vue" target="_blank" class="nav-link">GitHub</a></li>
    </ul>
</div>
        

        <div id="main">
            
                
    <div class="sidebar">
    <ul class="main-menu">
        <li><a href="/guide/" class="nav-link current">教程</a></li>
<li><a href="/api/" class="nav-link">API 参考</a></li>
<li><a href="/examples/" class="nav-link">例子</a></li>
<li><a href="/blog/" class="nav-link">Blog</a></li>
<li><a href="https://github.com/yyx990803/vue" target="_blank" class="nav-link">GitHub</a></li>
    </ul>
    <div class="list">
        <h2>Guide</h2>
        <ul class="menu-root">
            
                <li><a href="/guide/installation.html" class="sidebar-link">Installation</a></li>
            
                <li><a href="/guide/index.html" class="sidebar-link">开始吧！马猴烧酒</a></li>
            
                <li><a href="/guide/directives.html" class="sidebar-link">教练，我想学指令</a></li>
            
                <li><a href="/guide/filters.html" class="sidebar-link current">我在学过滤器的道路上迷失了方向</a></li>
            
                <li><a href="/guide/list.html" class="sidebar-link">不是假发，是列表</a></li>
            
                <li><a href="/guide/events.html" class="sidebar-link">事件的监听</a></li>
            
                <li><a href="/guide/forms.html" class="sidebar-link">处理表单</a></li>
            
                <li><a href="/guide/computed.html" class="sidebar-link">燃烧小宇宙吧！计算属性！</a></li>
            
                <li><a href="/guide/transitions.html" class="sidebar-link">我要替天行道，增加动画效果</a></li>
            
                <li><a href="/guide/composition.html" class="sidebar-link">Composing Components</a></li>
            
                <li><a href="/guide/application.html" class="sidebar-link">Building Larger Apps</a></li>
            
                <li><a href="/guide/plugin.html" class="sidebar-link">Plugins</a></li>
            
            <li style="margin:10px 0 3px">
              <script data-gittip-username="yyx990803"
                data-gittip-widget="button"
                src="//gttp.co/v1.js"></script>
            </li>
        </ul>
    </div>
</div>

<div class="content guide with-sidebar">
    <h1>我在学过滤器的道路上迷失了方向</h1>
    <div id="ad">
        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=vuejs" id="_carbonads_js"></script>
    </div>
    <h2 id="开宗明义">开宗明义</h2>
<p>一个 Vue.js 的过滤器从本质上来说，是获得一个数据，操作这个数据，然后再返回结果。语法上，过滤器需要一个简单的竖杠(<code>|</code>)进行标记，同时它可以输入一个或者多个参数：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">element</span> <span class="attribute">directive</span>=<span class="value">"expression | filterId [args...]"</span>&gt;</span><span class="tag">&lt;/<span class="title">element</span>&gt;</span></div></pre></td></tr></table></figure>

<h2 id="例子">例子</h2>
<p>过滤器必须放置在一个指令的值的后面：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">span</span> <span class="attribute">v-text</span>=<span class="value">"message | capitalize"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></div></pre></td></tr></table></figure>

<p>你也可以使用mustache风格（译者注：就是这个模板引擎的那个风格）的绑定：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">span</span>&gt;</span>&#123;&#123;message | uppercase&#125;&#125;<span class="tag">&lt;/<span class="title">span</span>&gt;</span></div></pre></td></tr></table></figure>

<p>多重绑定必须链接在一起：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">span</span>&gt;</span>&#123;&#123;message | lowercase | reverse&#125;&#125;<span class="tag">&lt;/<span class="title">span</span>&gt;</span></div></pre></td></tr></table></figure>

<h2 id="参数">参数</h2>
<p>一些过滤器有可选的参数，可以通过添加空格将这些参数简单的添加进去：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">span</span>&gt;</span>&#123;&#123;order | pluralize st nd rd th&#125;&#125;<span class="tag">&lt;/<span class="title">span</span>&gt;</span></div></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">input</span> <span class="attribute">v-on</span>=<span class="value">"keyup: submitForm | key enter"</span>&gt;</span></div></pre></td></tr></table></figure>

<p>想要看到特殊用法的例子，请见 <a href="/api/filters.html">full list of built-in filters</a>.</p>
<h2 id="写一个自定义过滤器">写一个自定义过滤器</h2>
<p>你可以使用全局方法 <code>Vue.filter()</code> 来注册一个过滤器，这需要输入一个 <strong>filterID</strong> 和一个 <strong>filter function</strong> 。过滤器的函数获取一个值作为参数，并且返回一个加工过的值：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Vue.filter(<span class="string">'reverse'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(value)</span> </span>{</div><div class="line">    <span class="keyword">return</span> value.split(<span class="string">''</span>).reverse().join(<span class="string">''</span>)</div><div class="line">})</div></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--</span></div><div class="line">    'abc' =&gt; 'cba'</div><div class="line">--&gt;</div><div class="line"><span class="tag">&lt;<span class="title">span</span> <span class="attribute">v-text</span>=<span class="value">"message | reverse"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></div></pre></td></tr></table></figure>

<p>过滤器函数也接受任何行内的参数:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Vue.filter(<span class="string">'wrap'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(value, begin, end)</span> </span>{</div><div class="line">    <span class="keyword">return</span> begin + value + end</div><div class="line">})</div></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--</span></div><div class="line">    'hello' =&gt; 'before hello after'</div><div class="line">--&gt;</div><div class="line"><span class="tag">&lt;<span class="title">span</span> <span class="attribute">v-text</span>=<span class="value">"message | wrap before after"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></div></pre></td></tr></table></figure>

<h2 id="计算过滤器">计算过滤器</h2>
<p>当一个过滤器被声明，他的 <code>this</code> 关键字被设置成被声明的视图模型实例。这允许输出基于它自己的视图模型状态的动态结果。<br>在这种情况下，我们需要追踪这些被访问的属性以便当他们改变时，使用该过滤器的指令会被重置。（译者注：这里重置来自于re-evaluated这个单词，我确实不知道怎么翻译较好。）</p>
<p>举个例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Vue.filter(<span class="string">'concat'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(value, key)</span> </span>{</div><div class="line">    <span class="comment">// `this` points to the VM invoking the filter</span></div><div class="line">    <span class="keyword">return</span> value + <span class="keyword">this</span>[key]</div><div class="line">})</div></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">input</span> <span class="attribute">v-model</span>=<span class="value">"userInput"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">span</span>&gt;</span>{&#123;msg | concat userInput&#125;}<span class="tag">&lt;/<span class="title">span</span>&gt;</span></div></pre></td></tr></table></figure>

<p>依赖它所访问视图模型状态的过滤器被叫做 <strong>计算过滤器computed filters</strong>。对于这个简单的示例，你可以仅仅使用一个表达式达到相同的结果，但是对于一些多余一句的复杂程序，你需要把他们放在一起，当到一个可计算属性或者是计算过滤器当中。</p>
<p>举个栗子，内置的<code>filterBy</code>以及<code>orderBy</code>过滤器都是计算过滤器，他们执行一些比较重要的数组传递工作。对于自定义过滤器，Vue.js 通过寻找一个过滤器的函数体中引用<code>this</code>关键字来检查计算过滤器。任何使用计算过滤器的指令将会自动的编译成一个表达式，这样它的过滤器就被包括在依赖收集程序中了。</p>
<p>如果你现在觉得计算过滤器的概念还很是纠结，别担心，金鸡胶……。他会被Vue.js自动的处理，你并不需要知道他的内在工作原理。在你了解了更多的相关概念知识之后，你将会豁然开朗。</p>
<p>现在你已经对指令和过滤器有一个完整的认识，是时候聊聊怎么<a href="/guide/list.html">显示一个列表</a>了。</p>

    <div class="footer">Caught a mistake or want to contribute to the documentation? <a href="https://github.com/vuejs/vuejs.org" target="_blank">Fork this site on Github</a>!</div>
</div>
            
        </div>

        
            <script src="/js/smooth-scroll.min.js"></script>
            <script src="/js/common.js"></script>
        

    </body>
</html>